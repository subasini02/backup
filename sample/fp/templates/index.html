<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dish Recommendation</title>
    <style>
        .search-container {
            margin-bottom: 20px;
        }
        .recommendations {
            margin-bottom: 40px;
        }
    </style>
</head>
<body>
    <h1>Dish Recommendation</h1>

    <!-- Search Form -->
    <div class="search-container">
        <h2>Search</h2>
        <form id="searchForm">
            <label for="searchInput">Search:</label>
            <input type="text" id="searchInput" name="searchInput">
            <button type="button" onclick="getRecommendations()">Get Recommendations</button>
        </form>
    </div>

    <!-- Display Recommendations -->
    <div class="recommendations" id="recommendations">
        <!-- Recommendations will be displayed here -->
    </div>

    <!-- Display Recommended Items -->
    <div class="recommended" id="recommended">
        <!-- Recommended items will be displayed here -->
    </div>

    <script>
        function getRecommendations() {
            var searchInput = document.getElementById('searchInput');
            var inputValue = searchInput.value.trim();
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/", true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    displayRecommendations(inputValue, response.suggestions);
                    displayRecommended(response.recommended);
                }
            };
            xhr.send(JSON.stringify({ antecedent_items: [inputValue] }));
        }

        function displayRecommendations(inputValue, suggestions) {
            var recommendationsDiv = document.getElementById('recommendations');
            var sessionDiv = document.createElement('div');
            sessionDiv.innerHTML = '<h2>Recommendations as you searched: ' + inputValue + '</h2>';
            if (suggestions.length === 0) {
                sessionDiv.innerHTML += 'No recommendations found.';
            } else {
                var ul = document.createElement('ul');
                suggestions.forEach(function (suggestion) {
                    var li = document.createElement('li');
                    li.textContent = suggestion;
                    ul.appendChild(li);
                });
                sessionDiv.appendChild(ul);
            }
            recommendationsDiv.appendChild(sessionDiv);
        }

        function displayRecommended(recommended) {
            var recommendedDiv = document.getElementById('recommended');
            var sessionDiv = document.createElement('div');
            sessionDiv.innerHTML = '<h2>Recommendation for You</h2>';
            if (recommended.length === 0) {
                sessionDiv.innerHTML += 'No recommendations found.';
            } else {
                var ul = document.createElement('ul');
                recommended.forEach(function (item) {
                    var li = document.createElement('li');
                    li.textContent = item;
                    ul.appendChild(li);
                });
                sessionDiv.appendChild(ul);
            }
            recommendedDiv.appendChild(sessionDiv);
        }
    </script>
</body>
</html>
